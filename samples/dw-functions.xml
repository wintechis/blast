<xml>
    <variables>
        <variable id="zUnqAV]GX9*X;yV{+Uhx">mac</variable>
        <variable id="Iv+nd1#p2IyBf=T,vfzj">host</variable>
        <variable id="^r7(~uSh*cfuF~EmutCw">deviceUri</variable>
        <variable id="t||]jaN*F%[Q,vucCbeA">connection status</variable>
    </variables>
    <block type="controls_whileUntil" id="WqRtnC/m|4a39;c)+Q2n" x="10" y="100">
        <field name="MODE">WHILE</field>
        <value name="BOOL">
            <block type="logic_boolean" id="RlIhOw_)P1F^xZM-WTz}">
                <field name="BOOL">TRUE</field>
            </block>
        </value>
        <statement name="DO">
            <block type="procedures_callnoreturn" id="#BXXSz)dIcIRM!F^0Xh0">
                <mutation name="establish connection">
                    <arg name="mac"></arg>
                    <arg name="host"></arg>
                </mutation>
                <value name="ARG0">
                    <block type="mac" id="Ph9Ti(N1b5~!0gyN)[gW">
                        <field name="MAC">be5860018744</field>
                    </block>
                </value>
                <value name="ARG1">
                    <block type="uri" id="h{yp}b,T[Xd|M-Xyn{P2">
                        <field name="URI">http://dwpi4.local:8000</field>
                    </block>
                </value>
                <next>
                    <block type="procedures_callnoreturn" id="Z,vH6TdE)aUJZ`@hFT/W">
                        <mutation name="disconnect">
                            <arg name="mac"></arg>
                            <arg name="host"></arg>
                        </mutation>
                        <value name="ARG0">
                            <block type="mac" id="G@9vTE08sTF{=1OYu=gc">
                                <field name="MAC">be5860018744</field>
                            </block>
                        </value>
                        <value name="ARG1">
                            <block type="uri" id="|R~2Z6IPU/BYfRRI8^bE">
                                <field name="URI">http://dwpi4.local:8000</field>
                            </block>
                        </value>
                    </block>
                </next>
            </block>
        </statement>
    </block>
    <block type="procedures_defnoreturn" id="I#Uxga;G3[~[uEU19VrU" x="546" y="105">
        <mutation>
            <arg name="mac" varid="zUnqAV]GX9*X;yV{+Uhx"></arg>
            <arg name="host" varid="Iv+nd1#p2IyBf=T,vfzj"></arg>
        </mutation>
        <field name="NAME">establish connection</field>
        <comment pinned="false" h="80" w="160">connects bluetooth device with mac to the sc-ble-adapter at url</comment>
        <statement name="STACK">
            <block type="variables_set" id="D*f:NslR^44(`#8y(K^x">
                <field name="VAR" id="^r7(~uSh*cfuF~EmutCw">deviceUri</field>
                <value name="VALUE">
                    <block type="text_join" id="+.)sEn)?OVrg(GW_3.k:">
                        <mutation items="4"></mutation>
                        <value name="ADD0">
                            <block type="variables_get" id="*;)t^/?K}-[jnV@9O=eE">
                                <field name="VAR" id="Iv+nd1#p2IyBf=T,vfzj">host</field>
                            </block>
                        </value>
                        <value name="ADD1">
                            <block type="text" id="==hS+6;6j-A7cfSh:M8/">
                                <field name="TEXT">/devices/</field>
                            </block>
                        </value>
                        <value name="ADD2">
                            <block type="variables_get" id="VfQ1R5AXA~%yKK:[TWIv">
                                <field name="VAR" id="zUnqAV]GX9*X;yV{+Uhx">mac</field>
                            </block>
                        </value>
                        <value name="ADD3">
                            <block type="text" id="8o+e)Zl|*O.NvTAk`O7G">
                                <field name="TEXT">/instruction</field>
                            </block>
                        </value>
                    </block>
                </value>
                <next>
                    <block type="variables_set" id=":ls9)}Qj}qY_/~e6@@e)">
                        <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                        <value name="VALUE">
                            <block type="httprequest" id="oWR)gVQ2eQK$Y:NP.Lw?">
                                <field name="OUTPUT">status</field>
                                <field name="METHOD">PUT</field>
                                <field name="HEADERS">"Content-Type": "application/json"</field>
                                <field name="BODY">{"type": "ble:Connect"}</field>
                                <value name="uri">
                                    <block type="variables_get" id="dn4o;]g^aMLRP-rwX8!z">
                                        <field name="VAR" id="^r7(~uSh*cfuF~EmutCw">deviceUri</field>
                                    </block>
                                </value>
                            </block>
                        </value>
                        <next>
                            <block type="controls_if" id="7:Xj^TGChe7/UL-xEAVg">
                                <mutation else="1"></mutation>
                                <value name="IF0">
                                    <block type="logic_compare" id="!.I44utdOp)hY3-6;Y6]">
                                        <field name="OP">EQ</field>
                                        <value name="A">
                                            <block type="variables_get" id="q+Q3,Wqdse9}(2=ZYx^B">
                                                <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                                            </block>
                                        </value>
                                        <value name="B">
                                            <block type="text" id="9_xZ4Qj[.l^^[`9Ge6f/">
                                                <field name="TEXT">200</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                                <statement name="DO0">
                                    <block type="displayText" id="G1kvVwu9{,Uc:5h=*9]K">
                                        <value name="text">
                                            <block type="text" id="jb=lLzqzIT|C`zm?il)M">
                                                <field name="TEXT">connected</field>
                                            </block>
                                        </value>
                                    </block>
                                </statement>
                                <statement name="ELSE">
                                    <block type="displayText" id="|J16.;2F:oRH$Qrq^@:o">
                                        <value name="text">
                                            <block type="text_join" id="V6)h(d~qB-HO_rwahPZh">
                                                <mutation items="2"></mutation>
                                                <value name="ADD0">
                                                    <block type="text" id="~7q/.3D?S](Xm*gXivpt">
                                                        <field name="TEXT">Connecting failed, Error Code:</field>
                                                    </block>
                                                </value>
                                                <value name="ADD1">
                                                    <block type="variables_get" id="IK-wq{!p487R2i-GI[w=">
                                                        <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                                                    </block>
                                                </value>
                                            </block>
                                        </value>
                                    </block>
                                </statement>
                            </block>
                        </next>
                    </block>
                </next>
            </block>
        </statement>
    </block>
    <block type="procedures_defnoreturn" id="+8xkbf(:s:D4Vt`_EE6;" x="544" y="571">
        <mutation>
            <arg name="mac" varid="zUnqAV]GX9*X;yV{+Uhx"></arg>
            <arg name="host" varid="Iv+nd1#p2IyBf=T,vfzj"></arg>
        </mutation>
        <field name="NAME">disconnect</field>
        <comment pinned="false" h="80" w="160">disconnects bluetooth device with mac from the sc-ble-adapter at url</comment>
        <statement name="STACK">
            <block type="variables_set" id=":-iQMk=~3C|gKS8,*]Ia">
                <field name="VAR" id="^r7(~uSh*cfuF~EmutCw">deviceUri</field>
                <value name="VALUE">
                    <block type="text_join" id="JvcKt)OI/0ji(!$ld/hj">
                        <mutation items="4"></mutation>
                        <value name="ADD0">
                            <block type="variables_get" id="aR/*X96[$AvB%-MK#6Ne">
                                <field name="VAR" id="Iv+nd1#p2IyBf=T,vfzj">host</field>
                            </block>
                        </value>
                        <value name="ADD1">
                            <block type="text" id="_.X]^%}4YmCn0cU#{s4#">
                                <field name="TEXT">/devices/</field>
                            </block>
                        </value>
                        <value name="ADD2">
                            <block type="variables_get" id="ccty6dtWh9bdOi4eD,z7">
                                <field name="VAR" id="zUnqAV]GX9*X;yV{+Uhx">mac</field>
                            </block>
                        </value>
                        <value name="ADD3">
                            <block type="text" id="S4D)nSI?3o?RgQ6-ZsMi">
                                <field name="TEXT">/instruction</field>
                            </block>
                        </value>
                    </block>
                </value>
                <next>
                    <block type="variables_set" id="lz/tk?Qaa,k0(/2!iB|$">
                        <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                        <value name="VALUE">
                            <block type="httprequest" id="#6x]mB4jh5Q^j9hN{vA[">
                                <field name="OUTPUT">status</field>
                                <field name="METHOD">PUT</field>
                                <field name="HEADERS">"Content-Type": "application/json"</field>
                                <field name="BODY">{"type": "ble:Disconnect"}</field>
                                <value name="uri">
                                    <block type="variables_get" id="KG_[$.8GR*l(^F1tFHAf">
                                        <field name="VAR" id="^r7(~uSh*cfuF~EmutCw">deviceUri</field>
                                    </block>
                                </value>
                            </block>
                        </value>
                        <next>
                            <block type="controls_if" id="YCD$z@281@c0ug1KLZof">
                                <mutation else="1"></mutation>
                                <value name="IF0">
                                    <block type="logic_compare" id="hmNM$CZQ.Ni]I^M/o={T">
                                        <field name="OP">EQ</field>
                                        <value name="A">
                                            <block type="variables_get" id="sfuOs^xa}ip~?@m7U6SW">
                                                <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                                            </block>
                                        </value>
                                        <value name="B">
                                            <block type="text" id="BXFcB8x_=8ig,E2$/|2Q">
                                                <field name="TEXT">200</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                                <statement name="DO0">
                                    <block type="displayText" id="`e2E.|IuP6Kom@lf=%-p">
                                        <value name="text">
                                            <block type="text" id="Q9q}Nfsxrf[egQOm=1=E">
                                                <field name="TEXT">disconnected</field>
                                            </block>
                                        </value>
                                    </block>
                                </statement>
                                <statement name="ELSE">
                                    <block type="displayText" id="w|vHi=:#EwBRKAN3RF$w">
                                        <value name="text">
                                            <block type="text_join" id="hDU=Dv;CPZ,9ws-z%-k!">
                                                <mutation items="2"></mutation>
                                                <value name="ADD0">
                                                    <block type="text" id="b0?4)awW|qB)%HB8NdB2">
                                                        <field name="TEXT">Disconnecting failed, Error Code:</field>
                                                    </block>
                                                </value>
                                                <value name="ADD1">
                                                    <block type="variables_get" id="_rhUZ4!H9j4[zzRIj_3t">
                                                        <field name="VAR" id="t||]jaN*F%[Q,vucCbeA">connection status</field>
                                                    </block>
                                                </value>
                                            </block>
                                        </value>
                                    </block>
                                </statement>
                            </block>
                        </next>
                    </block>
                </next>
            </block>
        </statement>
    </block>
</xml>