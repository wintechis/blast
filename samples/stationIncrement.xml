<xml>
    <variables>
        <variable id="eM9b.}=D0mz~msKcQjiA">RSSI</variable>
    </variables>
    <block type="variables_set" id="ayNM:Ji/e+fT2x@/oZLM" x="80" y="71">
        <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
        <value name="VALUE">
            <block type="ibeacon_data" id="i[Cs6-Rt[;}~lF_GDVxE">
                <field name="value">rssi</field>
                <value name="ibeacon">
                    <block type="things" id="cLbWNUo2yCZ(h`?(,zF:">
                        <value name="mac">
                            <block type="mac" id="`F)aJZ5fMYI8M]jftE7]">
                                <field name="MAC">c4eb72373fe8</field>
                            </block>
                        </value>
                    </block>
                </value>
                <value name="receiver">
                    <block type="receiver" id="x0sA?G4}pOt$sG.K9|~-">
                        <value name="address">
                            <block type="uri" id="!%K3_cxO-txL}V|sIu)o">
                                <field name="URI">http://dw-station-5.local/ble/current</field>
                            </block>
                        </value>
                    </block>
                </value>
            </block>
        </value>
        <next>
            <block type="controls_whileUntil" id="9E{9@8WDB+c?D3=UF=:[">
                <field name="MODE">UNTIL</field>
                <value name="BOOL">
                    <block type="event" id="ximq2Cl1+]pfc7q-*v!9">
                        <field name="startstop">BECOMES</field>
                        <field name="operator">GT</field>
                        <value name="measurement">
                            <block type="variables_get" id="!pLAWi/ppggkYvkFFJ**">
                                <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                            </block>
                        </value>
                        <value name="value">
                            <block type="math_number" id="SA#0epz4PJyjZb.0(rBi">
                                <field name="NUM">-50</field>
                            </block>
                        </value>
                    </block>
                </value>
                <statement name="DO">
                    <block type="variables_set" id="o(F5V02+T6{t;R!,qE+8">
                        <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                        <value name="VALUE">
                            <block type="ibeacon_data" id="9OFI+[ZMb3UO08Qlrf_B">
                                <field name="value">rssi</field>
                                <value name="ibeacon">
                                    <block type="things" id="4r;0S3X=Hft}5{`XE3~^">
                                        <value name="mac">
                                            <block type="mac" id="7+@)porFLChF_G]g;RtQ">
                                                <field name="MAC">c4eb72373fe8</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                                <value name="receiver">
                                    <block type="receiver" id="$3QF~NzOk-r2,~mne()D">
                                        <value name="address">
                                            <block type="uri" id="gY$BKqcMu!pIGqj}yYi;">
                                                <field name="URI">http://dw-station-5.local/ble/current</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                            </block>
                        </value>
                        <next>
                            <block type="displayText" id="FH#c;%~?9}I2iAkI?V!`">
                                <value name="text">
                                    <block type="text_join" id="Kinm6WfOJ)/,$mc6rM8$">
                                        <mutation items="2"></mutation>
                                        <value name="ADD0">
                                            <block type="text" id="YPNObgXTcV|#^%{Z/=Ax">
                                                <field name="TEXT">RSSI: </field>
                                            </block>
                                        </value>
                                        <value name="ADD1">
                                            <block type="variables_get" id="M|eTJeqn?[3ooJ97pQuj">
                                                <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                            </block>
                        </next>
                    </block>
                </statement>
                <next>
                    <block type="displayText" id=",Pa;(yOQHy-;oG^w`lk4">
                        <value name="text">
                            <block type="text" id="Wf}rH#VB[GHi*%EF-Ft~">
                                <field name="TEXT">Beacon is close, connecting...</field>
                            </block>
                        </value>
                        <next>
                            <block type="displayText" id="(8L*o+IlK$X/nEEYAB2W">
                                <value name="text">
                                    <block type="text_join" id="f!c3upfR4!Gb4BaplrRD">
                                        <mutation items="2"></mutation>
                                        <value name="ADD0">
                                            <block type="text" id="E*WX{R:[vfy}iY;e0A8o">
                                                <field name="TEXT">Connect Status:</field>
                                            </block>
                                        </value>
                                        <value name="ADD1">
                                            <block type="httprequest" id="c3JLPF{5-d?N}^hTjCP9">
                                                <field name="OUTPUT">status</field>
                                                <field name="METHOD">PUT</field>
                                                <field name="HEADERS">"Content-Type: application/json"</field>
                                                <field name="BODY">{
  "type": "ble:Connect"
}</field>
                                                <value name="uri">
                                                    <block type="uri" id="Qe$kA2-c0S|u3KBBE?8n">
                                                        <field name="URI">http://dw-station-5.local:8000/devices/c4eb72373fe8/instruction</field>
                                                    </block>
                                                </value>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                                <next>
                                    <block type="displayText" id="YEICmiG~[+tK7`t5SS/w">
                                        <value name="text">
                                            <block type="text" id="sOrlC!0M-5~LToK={KuF">
                                                <field name="TEXT">Reading current values...</field>
                                            </block>
                                        </value>
                                        <next>
                                            <block type="displayText" id="(bW/i3Uc0Ax!-=Q2vBa]">
                                                <value name="text">
                                                    <block type="readdw" id="d`%y)Vzr;]rQ1ZWA6i?D">
                                                        <value name="MAC">
                                                            <block type="mac" id="#`7[9q0:LRG0oZDf?`uv">
                                                                <field name="MAC">c4eb72373fe8</field>
                                                            </block>
                                                        </value>
                                                    </block>
                                                </value>
                                                <next>
                                                    <block type="displayText" id="@co6[M;Dr}1WR[x,kjF-">
                                                        <value name="text">
                                                            <block type="writedw" id="y_G~^HQa::Zg]F0/Y7$:">
                                                                <value name="value">
                                                                    <block type="text" id="XzVew9/@dBvHwW(Mlra]">
                                                                        <field name="TEXT">1|2|1</field>
                                                                    </block>
                                                                </value>
                                                                <value name="MAC">
                                                                    <block type="mac" id="M*9ENC3s7O*CL6p]7F-J">
                                                                        <field name="MAC">c4eb72373fe8</field>
                                                                    </block>
                                                                </value>
                                                            </block>
                                                        </value>
                                                        <next>
                                                            <block type="controls_whileUntil" id="$wypKO_x/@apUdU9A%$7">
                                                                <field name="MODE">UNTIL</field>
                                                                <value name="BOOL">
                                                                    <block type="event" id="TlaGEVjIA.%ab]xfWZr4">
                                                                        <field name="startstop">STOPS</field>
                                                                        <field name="operator">GT</field>
                                                                        <value name="measurement">
                                                                            <block type="variables_get" id=")l,8B$sf{.oTP.$$gE~!">
                                                                                <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                                                                            </block>
                                                                        </value>
                                                                        <value name="value">
                                                                            <block type="math_number" id="NM)^r%K.H)1l0kEQybUH">
                                                                                <field name="NUM">-50</field>
                                                                            </block>
                                                                        </value>
                                                                    </block>
                                                                </value>
                                                                <statement name="DO">
                                                                    <block type="variables_set" id="LBu2T`NEtR6EvOVlw|7s">
                                                                        <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                                                                        <value name="VALUE">
                                                                            <block type="ibeacon_data" id="doW4}#yZH;{Np582I?km">
                                                                                <field name="value">rssi</field>
                                                                                <value name="ibeacon">
                                                                                    <block type="things" id="bYUj*bQyO]L4W,W5-v(Q">
                                                                                        <value name="mac">
                                                                                            <block type="mac" id="/u3yCrDDRI!4Vb)be8xC">
                                                                                                <field name="MAC">c4eb72373fe8</field>
                                                                                            </block>
                                                                                        </value>
                                                                                    </block>
                                                                                </value>
                                                                                <value name="receiver">
                                                                                    <block type="receiver" id="A[ngZbbU8i`7;unc39R;">
                                                                                        <value name="address">
                                                                                            <block type="uri" id="6Y.+f4@GZi8V;aP776|E">
                                                                                                <field name="URI">http://dw-station-5.local/ble/current</field>
                                                                                            </block>
                                                                                        </value>
                                                                                    </block>
                                                                                </value>
                                                                            </block>
                                                                        </value>
                                                                        <next>
                                                                            <block type="displayText" id="YBj5h}is^c!cTD^kj;hM">
                                                                                <value name="text">
                                                                                    <block type="text_join" id="K`.y:59JyUb4},NV(B6`">
                                                                                        <mutation items="2"></mutation>
                                                                                        <value name="ADD0">
                                                                                            <block type="text" id="~RS^#?(SnPQh#^-DO@Xs">
                                                                                                <field name="TEXT">RSSI: </field>
                                                                                            </block>
                                                                                        </value>
                                                                                        <value name="ADD1">
                                                                                            <block type="variables_get" id="v7UenK7a#u^1728+vMv0">
                                                                                                <field name="VAR" id="eM9b.}=D0mz~msKcQjiA">RSSI</field>
                                                                                            </block>
                                                                                        </value>
                                                                                    </block>
                                                                                </value>
                                                                            </block>
                                                                        </next>
                                                                    </block>
                                                                </statement>
                                                                <next>
                                                                    <block type="displayText" id="OaY^]5rDzYJniugKFkhu">
                                                                        <value name="text">
                                                                            <block type="text" id="Guf;1=/OPm`Krbaund,p">
                                                                                <field name="TEXT">Beacon is far, disconnecting...</field>
                                                                            </block>
                                                                        </value>
                                                                        <next>
                                                                            <block type="displayText" id="x{GPgX0sgtWCGt#0bkRr">
                                                                                <value name="text">
                                                                                    <block type="text_join" id="Kk7b^2j%yw8ed??FHc`J">
                                                                                        <mutation items="2"></mutation>
                                                                                        <value name="ADD0">
                                                                                            <block type="text" id="a#TRJV83Dka3/O^fqs[p">
                                                                                                <field name="TEXT">Disconnect Status:</field>
                                                                                            </block>
                                                                                        </value>
                                                                                        <value name="ADD1">
                                                                                            <block type="httprequest" id="_x~Vc+oqUF;oI`,(?k86">
                                                                                                <field name="OUTPUT">status</field>
                                                                                                <field name="METHOD">PUT</field>
                                                                                                <field name="HEADERS">"Content-Type: application/json"</field>
                                                                                                <field name="BODY">{
  "type": "ble:Disconnect"
}</field>
                                                                                                <value name="uri">
                                                                                                    <block type="uri" id="rBA[5oFP31lAG${7[vp2">
                                                                                                        <field name="URI">http://dw-station-5.local:8000/devices/c4eb72373fe8/instruction</field>
                                                                                                    </block>
                                                                                                </value>
                                                                                            </block>
                                                                                        </value>
                                                                                    </block>
                                                                                </value>
                                                                            </block>
                                                                        </next>
                                                                    </block>
                                                                </next>
                                                            </block>
                                                        </next>
                                                    </block>
                                                </next>
                                            </block>
                                        </next>
                                    </block>
                                </next>
                            </block>
                        </next>
                    </block>
                </next>
            </block>
        </next>
    </block>
</xml>